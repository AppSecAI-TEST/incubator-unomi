<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean class="org.jahia.modules.wemi.WemiScriptFilter">
        <property name="applyOnConfigurations" value="page" />
        <property name="skipOnConfiguration" value="include,wrapper" />
        <property name="applyOnModes" value="live,preview" />
        <property name="priority" value="3" />
        <property name="scriptEngineUtils" ref="scriptEngineUtils"/>
        <property name="renderingScriptsLocation" value="${wemiRenderingScriptsLocation:/modules/wem-components/META-INF/scripts}"/>
        <property name="scriptExtension" value="groovy" />
    </bean>

    <bean id="SegmentFilter" class="org.jahia.modules.wemi.WemSegmentFilter">
        <property name="priority" value="7" />
        <property name="description" value="Control display of a node based on the WEM segments a user is part of "/>
        <property name="applyOnConfigurations" value="module,wrappedcontent" />
    </bean>

    <bean id="WemiWrapperFilter" class="org.jahia.modules.wemi.WemiWrapperFilter">
        <property name="priority" value="7" />
        <property name="description" value="Set a wrapper around a node rendering based on a node type"/>
        <property name="applyOnConfigurations" value="module,wrappedcontent" />
        <property name="applyOnNodeTypes" value="jmix:wemContentView,jmix:wemContentHovered,jmix:wemContentClicked,jmix:wemSetProperty,jmix:wemIncrementProperty"/>
        <property name="wrapperName" value="wemWrapper" />
    </bean>

    <bean id="WemiApplicationListener" class="org.jahia.modules.wemi.WemiApplicationListener">

    </bean>

    <bean class="org.jahia.modules.wemi.WemSegmentChoiceListInitializer">
        <property name="key" value="wemSegments"/>
    </bean>

    <bean id="Engine.Tab.Marketing" class="org.jahia.services.uicomponents.bean.editmode.EngineTab">
        <property name="id" value="marketing"/>
        <property name="titleKey" value="label.engineTab.marketing"/>
        <property name="tabItem">
            <bean class="org.jahia.ajax.gwt.client.widget.contentengine.PropertiesTabItem">
                <property name="showForTypes">
                    <list>
                        <value>jnt:content</value>
                        <value>jnt:area</value>
                        <value>jnt:page</value>
                        <value>jnt:nodeLink</value>
                        <value>jnt:externalLink</value>
                    </list>
                </property>

                <property name="dataType">
                    <list>
                        <value>marketing</value>
                    </list>
                </property>
            </bean>
        </property>
        <property name="parentEditConfiguration" ref="editmode" />
        <property name="requiredPermission" value="viewChannelsTab"/>
    </bean>

    <bean id="Engine.Tab.Marketing.Studio" class="org.jahia.services.uicomponents.bean.editmode.EngineTab">
        <property name="id" value="channels"/>
        <property name="titleKey" value="label.engineTab.marketing"/>
        <property name="tabItem">
            <bean class="org.jahia.ajax.gwt.client.widget.contentengine.PropertiesTabItem">
                <property name="dataType">
                    <list>
                        <value>marketing</value>
                    </list>
                </property>
            </bean>
        </property>

        <property name="parentEditConfiguration" ref="studiomode" />
    </bean>


</beans>