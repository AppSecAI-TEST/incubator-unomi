<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

    <reference id="definitionsService" interface="org.oasis_open.contextserver.api.services.DefinitionsService"/>
    <reference id="persistenceService" interface="org.oasis_open.contextserver.persistence.spi.PersistenceService"/>

    <service interface="org.oasis_open.contextserver.persistence.elasticsearch.conditions.ConditionEvaluator">
        <service-properties>
            <entry key="conditionEvaluatorId" value="sourceEventPropertyConditionEvaluator"/>
        </service-properties>
        <bean class="org.oasis_open.contextserver.plugins.trackedevent.conditions.SourceEventPropertyConditionEvaluator">
            <property name="definitionsService" ref="definitionsService"/>
        </bean>
    </service>

    <service
            interface="org.oasis_open.contextserver.persistence.elasticsearch.conditions.ConditionESQueryBuilder">
        <service-properties>
            <entry key="queryBuilderId" value="sourceEventPropertyConditionESQueryBuilder"/>
        </service-properties>
        <bean class="org.oasis_open.contextserver.plugins.trackedevent.conditions.SourceEventPropertyConditionESQueryBuilder"/>
    </service>

</blueprint>
